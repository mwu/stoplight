---
name: stoplight
version: 0.1.0.0
synopsis: Rate-limiting constructs for monadic actions
description: Rate-limiting constructs for monadic actions
license: BSD3
license-file: LICENSE
author: Ozgun Ataman
maintainer: ozgun.ataman@soostone.com
copyright: Soostone Inc, 2014
category: Control
build-type: Simple

when:
  - condition: flag(development)
    then:
      cpp-options: -DDEVELOPMENT
    else:
      cpp-options: -DNODEVELOPMENT

flags:
  development:
    manual: true
    default: false
    description: >-
      Compile with -O0 for faster compile times.
      Disable for production builds.

default-extensions:
  - DeriveDataTypeable

dependencies:
  - base
  - SafeSemaphore
  - immortal

library:
  source-dirs: src
  ghc-options:
    - -Wall -fwarn-redundant-constraints -Wincomplete-record-updates

tests:
  test:
    main: Main.hs
    source-dirs:
      - src
      - test
    dependencies:
      - atomic-primops
      - hspec
      - tasty
      - tasty-hspec
      - tasty-hunit
      - tasty-discover
      - time
    build-tools:
      - tasty-discover:tasty-discover
    ghc-options:
      - -Wall -fwarn-redundant-constraints -Wincomplete-record-updates -threaded "-with-rtsopts=-N -xn -A512M"
